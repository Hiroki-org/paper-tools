(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{5014:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>t});var s=a(8111),o=a(5271);function t(){let[e,r]=(0,o.useState)([]),[a,t]=(0,o.useState)(!0),[l,n]=(0,o.useState)(null),c=(0,o.useCallback)(async()=>{t(!0),n(null);try{var e,a;let s=await fetch("/api/archive"),o=await s.json();if(!s.ok)throw Error(null!=(e=o.error)?e:"Failed to load archive");r(null!=(a=o.records)?a:[])}catch(e){n(e instanceof Error?e.message:"Unknown error")}finally{t(!1)}},[]);return(0,o.useEffect)(()=>{c()},[c]),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Notion Archive"}),(0,s.jsx)("button",{onClick:c,disabled:a,className:"rounded-lg bg-[var(--color-primary)] px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-[var(--color-primary-hover)] disabled:opacity-50",children:a?"Loading…":"Refresh"})]}),l&&(0,s.jsx)("div",{className:"rounded-lg bg-red-50 p-3 text-sm text-red-700",children:l}),!a&&0===e.length&&!l&&(0,s.jsx)("div",{className:"rounded-lg border border-dashed border-gray-300 p-8 text-center text-gray-400",children:"No papers archived yet. Use the Recommend page to save papers to Notion."}),e.length>0&&(0,s.jsx)("div",{className:"overflow-x-auto rounded-lg border border-[var(--color-border)]",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-[var(--color-border)] bg-gray-50 text-left",children:[(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"#"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Title"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"DOI"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"S2 ID"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map((e,r)=>(0,s.jsxs)("tr",{className:"border-b border-[var(--color-border)] transition-colors hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-gray-400",children:r+1}),(0,s.jsx)("td",{className:"max-w-xs truncate px-4 py-3 font-medium",children:e.title}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.doi?(0,s.jsx)("a",{href:"https://doi.org/".concat(e.doi),target:"_blank",rel:"noopener noreferrer",className:"text-[var(--color-primary)] hover:underline",children:e.doi}):(0,s.jsx)("span",{className:"text-gray-300",children:"—"})}),(0,s.jsx)("td",{className:"px-4 py-3 font-mono text-xs",children:e.semanticScholarId?(0,s.jsxs)("a",{href:"https://api.semanticscholar.org/graph/v1/paper/".concat(e.semanticScholarId),target:"_blank",rel:"noopener noreferrer",className:"text-[var(--color-primary)] hover:underline",children:[e.semanticScholarId.slice(0,12),"…"]}):(0,s.jsx)("span",{className:"text-gray-300",children:"—"})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[e.doi&&(0,s.jsx)("a",{href:"/graph?doi=".concat(encodeURIComponent(e.doi)),className:"rounded border border-[var(--color-border)] px-2 py-0.5 text-xs transition-colors hover:bg-gray-100",children:"Graph"}),(0,s.jsx)("a",{href:"https://www.notion.so/".concat(e.pageId.replace(/-/g,"")),target:"_blank",rel:"noopener noreferrer",className:"rounded border border-[var(--color-border)] px-2 py-0.5 text-xs transition-colors hover:bg-gray-100",children:"Notion ↗"})]})})]},e.pageId))})]})}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:["Showing ",e.length," records from Notion database"]})]})}},5772:(e,r,a)=>{Promise.resolve().then(a.bind(a,5014))}},e=>{e.O(0,[814,743,358],()=>e(e.s=5772)),_N_E=e.O()}]);