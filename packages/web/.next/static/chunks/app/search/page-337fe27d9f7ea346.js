(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{3482:(e,r,a)=>{Promise.resolve().then(a.bind(a,7856))},7856:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>n});var s=a(8111),l=a(5271);function t(e){let{onSearch:r,loading:a=!1,placeholder:t="Enter keyword…"}=e,[o,n]=(0,l.useState)(""),[i,d]=(0,l.useState)(30);return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o.trim()&&r(o.trim(),i)},className:"flex flex-wrap items-end gap-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{htmlFor:"search-query",className:"mb-1 block text-sm font-medium",children:"Keyword"}),(0,s.jsx)("input",{id:"search-query",type:"text",value:o,onChange:e=>n(e.target.value),placeholder:t,disabled:a,className:"w-full rounded-lg border border-[var(--color-border)] px-3 py-2 text-sm outline-none focus:border-[var(--color-primary)] focus:ring-2 focus:ring-[var(--color-primary)]/20"})]}),(0,s.jsxs)("div",{className:"w-28",children:[(0,s.jsx)("label",{htmlFor:"max-results",className:"mb-1 block text-sm font-medium",children:"Max Results"}),(0,s.jsx)("input",{id:"max-results",type:"number",min:1,max:100,value:i,onChange:e=>d(Number(e.target.value)),disabled:a,className:"w-full rounded-lg border border-[var(--color-border)] px-3 py-2 text-sm outline-none focus:border-[var(--color-primary)] focus:ring-2 focus:ring-[var(--color-primary)]/20"})]}),(0,s.jsx)("button",{type:"submit",disabled:a||!o.trim(),className:"rounded-lg bg-[var(--color-primary)] px-5 py-2 text-sm font-medium text-white transition-colors hover:bg-[var(--color-primary-hover)] disabled:cursor-not-allowed disabled:opacity-50",children:a?"Searching…":"Search"})]})}function o(e){var r;let{paper:a,actions:l}=e;return(0,s.jsxs)("div",{className:"rounded-lg border border-[var(--color-border)] bg-[var(--color-card)] p-4 shadow-sm transition-shadow hover:shadow-md",children:[(0,s.jsx)("h3",{className:"text-base font-semibold leading-snug text-[var(--color-text)]",children:a.url?(0,s.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[var(--color-primary)] hover:underline",children:a.title}):a.title}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[var(--color-text-muted)]",children:(null==(r=a.authors)?void 0:r.map(e=>e.name).join(", "))||"Unknown authors"}),(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-[var(--color-text-muted)]",children:[a.year&&(0,s.jsx)("span",{className:"rounded bg-slate-100 px-2 py-0.5",children:a.year}),a.venue&&(0,s.jsx)("span",{className:"rounded bg-slate-100 px-2 py-0.5",children:a.venue}),a.doi&&(0,s.jsx)("a",{href:"https://doi.org/".concat(a.doi),target:"_blank",rel:"noopener noreferrer",className:"rounded bg-blue-50 px-2 py-0.5 text-[var(--color-primary)] hover:underline",children:"DOI"}),null!=a.citationCount&&(0,s.jsxs)("span",{className:"rounded bg-green-50 px-2 py-0.5",children:["\uD83D\uDD17 ",a.citationCount," citations"]})]}),a.abstract&&(0,s.jsx)("p",{className:"mt-3 line-clamp-3 text-sm leading-relaxed text-[var(--color-text-muted)]",children:a.abstract}),a.keywords&&a.keywords.length>0&&(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:a.keywords.map(e=>(0,s.jsx)("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-xs text-blue-700",children:e},e))}),l&&(0,s.jsx)("div",{className:"mt-3 flex gap-2",children:l})]})}function n(){let[e,r]=(0,l.useState)([]),[a,n]=(0,l.useState)([]),[i,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(!1),[u,x]=(0,l.useState)(null),p=(0,l.useCallback)(async(e,a)=>{d(!0),x(null),n([]);try{var s,l;let t=await fetch("/api/search?q=".concat(encodeURIComponent(e),"&maxResults=").concat(a)),o=await t.json();if(!t.ok)throw Error(null!=(s=o.error)?s:"Search failed");r(null!=(l=o.papers)?l:[])}catch(e){x(e instanceof Error?e.message:"Unknown error"),r([])}finally{d(!1)}},[]),h=(0,l.useCallback)(async()=>{if(0!==e.length){m(!0),x(null);try{var r,a;let s=await fetch("/api/search/drilldown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seedPapers:e.slice(0,5),depth:1,maxPerLevel:10})}),l=await s.json();if(!s.ok)throw Error(null!=(r=l.error)?r:"Drilldown failed");n(null!=(a=l.results)?a:[])}catch(e){x(e instanceof Error?e.message:"Unknown error")}finally{m(!1)}}},[e]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Search Papers"}),(0,s.jsx)(t,{onSearch:p,loading:i}),u&&(0,s.jsx)("div",{className:"rounded-lg bg-red-50 p-3 text-sm text-red-700",children:u}),e.length>0&&(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold",children:["Results (",e.length,")"]}),(0,s.jsx)("button",{onClick:h,disabled:c,className:"rounded-lg border border-[var(--color-primary)] px-4 py-1.5 text-sm font-medium text-[var(--color-primary)] transition-colors hover:bg-[var(--color-primary)] hover:text-white disabled:opacity-50",children:c?"Drilling down…":"Drilldown (top 5)"})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:e.map((e,r)=>(0,s.jsx)(o,{paper:e},r))})]}),a.length>0&&(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Drilldown Results"}),a.map((e,r)=>(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-500",children:["Level ",e.level," (",e.papers.length," papers)"]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:e.papers.map((e,r)=>(0,s.jsx)(o,{paper:e},r))})]},r))]})]})}}},e=>{e.O(0,[814,743,358],()=>e(e.s=3482)),_N_E=e.O()}]);